<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Construction Carpentry</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0b1220" />
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <div class="title">Construction Carpentry</div>
      <div class="sub">PWA • Offline • Field-first</div>
    </div>
  </header>

  <main class="wrap">

    <!-- HOME / TAPE MATH -->
    <section class="view isActive" id="view-home" aria-label="Home">
      <div class="card">
        <div class="cardHead">
          <h2>Tape / Fraction Converter</h2>
          <button class="btnGhost btnSmall" data-steps="stepsTape">Steps</button>
        </div>

        <div class="grid2">
          <div class="field">
            <label>Fraction / mixed (e.g., 3/16, 1 1/2)</label>
            <input id="inpFracToDec" inputmode="text" placeholder="1 3/8" />
            <div class="row">
              <button class="btnPrimary" id="btnFracToDec">→ Decimal (in)</button>
              <button class="btnGhost" id="btnTapeClear1">Clear</button>
            </div>
            <div class="out" id="outFracToDec">—</div>
          </div>

          <div class="field">
            <label>Decimal inches (e.g., 0.1875)</label>
            <input id="inpDecToTape" inputmode="decimal" placeholder="0.333333" />
            <div class="row">
              <button class="btnPrimary" id="btnDecToTape">→ Nearest 1/16</button>
              <button class="btnGhost" id="btnTapeClear2">Clear</button>
            </div>
            <div class="out" id="outDecToTape">—</div>
          </div>
        </div>

        <div class="stepsPanel" id="stepsTape" hidden>
          <div class="stepsTitle">Steps</div>
          <pre class="stepsOut" id="outStepsTape"></pre>
        </div>
      </div>

      <div class="card">
        <div class="cardHead">
          <h2>Fraction Add / Subtract / Multiply / Divide (nearest 1/16)</h2>
          <button class="btnGhost btnSmall" data-steps="stepsFracOps">Steps</button>
        </div>

        <div class="grid2">
          <div class="field">
            <label>A (e.g., 1 3/8)</label>
            <input id="inpA" inputmode="text" placeholder="1 3/8" />
          </div>
          <div class="field">
            <label>B (e.g., 7/16)</label>
            <input id="inpB" inputmode="text" placeholder="7/16" />
          </div>
        </div>

        <div class="row wrapRow">
          <button class="btnPrimary" id="btnAdd">A + B</button>
          <button class="btnPrimary" id="btnSub">A − B</button>
          <button class="btnPrimary" id="btnMul">A × B</button>
          <button class="btnPrimary" id="btnDiv">A ÷ B</button>
          <button class="btnGhost" id="btnFracOpsClear">Clear</button>
        </div>

        <div class="out" id="outFracOps">—</div>

        <div class="stepsPanel" id="stepsFracOps" hidden>
          <div class="stepsTitle">Steps</div>
          <pre class="stepsOut" id="outStepsFracOps"></pre>
        </div>
      </div>

      <div class="card">
        <div class="cardHead">
          <h2>Inches ↔ Decimal Feet (tape-ready)</h2>
          <button class="btnGhost btnSmall" data-steps="stepsFeet">Steps</button>
        </div>

        <div class="grid2">
          <div class="field">
            <label>Feet & Inches (e.g., 5' 3 7/16")</label>
            <input id="inpFtIn" inputmode="text" placeholder="5' 3 7/16" />
            <div class="row">
              <button class="btnPrimary" id="btnToDecFt">→ Decimal Feet</button>
              <button class="btnGhost" id="btnFeetClear1">Clear</button>
            </div>
            <div class="out" id="outToDecFt">—</div>
          </div>

          <div class="field">
            <label>Decimal Feet (e.g., 5.286458)</label>
            <input id="inpDecFt" inputmode="decimal" placeholder="5.286458" />
            <div class="row">
              <button class="btnPrimary" id="btnToFtIn">→ Ft + In (1/16)</button>
              <button class="btnGhost" id="btnFeetClear2">Clear</button>
            </div>
            <div class="out" id="outToFtIn">—</div>
          </div>
        </div>

        <div class="stepsPanel" id="stepsFeet" hidden>
          <div class="stepsTitle">Steps</div>
          <pre class="stepsOut" id="outStepsFeet"></pre>
        </div>
      </div>
    </section>

    <!-- LAYOUT / MATERIALS AUDITOR -->
    <section class="view" id="view-layout" aria-label="Layout">
      <div class="card">
        <div class="cardHead">
          <h2>Materials Auditor (running tally)</h2>
          <button class="btnGhost btnSmall" data-steps="stepsAudit">Steps</button>
        </div>

        <div class="grid3">
          <div class="field">
            <label>Item</label>
            <input id="audItem" placeholder="2x4 Stud" />
          </div>
          <div class="field">
            <label>Qty</label>
            <input id="audQty" inputmode="decimal" placeholder="10" />
          </div>
          <div class="field">
            <label>Unit (optional)</label>
            <input id="audUnit" placeholder="pcs" />
          </div>
        </div>

        <div class="grid2">
          <div class="field">
            <label>Unit Cost (optional)</label>
            <input id="audCost" inputmode="decimal" placeholder="3.48" />
          </div>
          <div class="field">
            <label>Notes (optional)</label>
            <input id="audNotes" placeholder="Wall A, north side" />
          </div>
        </div>

        <div class="row wrapRow">
          <button class="btnPrimary" id="audAdd">Add Line</button>
          <button class="btnGhost" id="audClearInputs">Clear Inputs</button>
          <button class="btnGhost" id="audExport">Export JSON</button>
          <button class="btnGhost" id="audImport">Import JSON</button>
          <button class="btnDanger" id="audWipe">Wipe List</button>
        </div>

        <div class="out" id="audSummary">—</div>

        <div class="tableWrap">
          <table class="tbl" id="audTable" aria-label="Materials table">
            <thead>
              <tr>
                <th>Item</th>
                <th class="num">Qty</th>
                <th>Unit</th>
                <th class="num">Cost</th>
                <th>Notes</th>
                <th class="num">Line $</th>
                <th></th>
              </tr>
            </thead>
            <tbody id="audBody"></tbody>
          </table>
        </div>

        <div class="stepsPanel" id="stepsAudit" hidden>
          <div class="stepsTitle">How to use</div>
          <pre class="stepsOut">
• Add items as you measure / cut / purchase (studs, plates, sheets, fasteners)
• Export JSON to text (Notes app) as your backup
• Import JSON to restore later
• This is an auditor — it preserves reality even when plans change
          </pre>
        </div>
      </div>
    </section>

    <!-- ROOFING -->
    <section class="view" id="view-roof" aria-label="Roofing">
      <div class="card">
        <div class="cardHead">
          <h2>Pitch ↔ Angle (standard rise per 12)</h2>
          <button class="btnGhost btnSmall" data-steps="stepsPitch">Steps</button>
        </div>

        <div class="grid2">
          <div class="field">
            <label>Pitch rise (per 12)</label>
            <input id="inpPitchRise" inputmode="decimal" placeholder="6" />
          </div>
          <div class="field">
            <label>Run (default 12)</label>
            <input id="inpPitchRun" inputmode="decimal" placeholder="12" />
          </div>
        </div>

        <div class="row">
          <button class="btnPrimary" id="btnPitchCalc">Calculate</button>
          <button class="btnGhost" id="btnPitchClear">Clear</button>
        </div>

        <div class="out" id="outPitch">—</div>

        <div class="stepsPanel" id="stepsPitch" hidden>
          <div class="stepsTitle">Steps</div>
          <pre class="stepsOut" id="outStepsPitch"></pre>
        </div>
      </div>

      <div class="card">
        <div class="cardHead">
          <h2>Rise / Run → Rafter Length</h2>
          <button class="btnGhost btnSmall" data-steps="stepsRafter">Steps</button>
        </div>

        <div class="grid2">
          <div class="field">
            <label>Run (e.g., 12' 0)</label>
            <input id="inpRun" inputmode="text" placeholder="12' 0" />
          </div>
          <div class="field">
            <label>Pitch rise (per 12)</label>
            <input id="inpPitch" inputmode="decimal" placeholder="6" />
          </div>
        </div>

        <div class="row">
          <button class="btnPrimary" id="btnRafterCalc">Calculate</button>
          <button class="btnGhost" id="btnRafterClear">Clear</button>
        </div>

        <div class="out" id="outRafter">—</div>

        <div class="stepsPanel" id="stepsRafter" hidden>
          <div class="stepsTitle">Steps</div>
          <pre class="stepsOut" id="outStepsRafter"></pre>
        </div>
      </div>

      <div class="card">
        <div class="cardHead">
          <h2>Diagonal (Pythagorean)</h2>
          <button class="btnGhost btnSmall" data-steps="stepsSquare">Steps</button>
        </div>

        <div class="grid2">
          <div class="field">
            <label>Side A</label>
            <input id="inpSideA" inputmode="text" placeholder="3'" />
          </div>
          <div class="field">
            <label>Side B</label>
            <input id="inpSideB" inputmode="text" placeholder="4'" />
          </div>
        </div>

        <div class="row">
          <button class="btnPrimary" id="btnSquareCalc">Calculate</button>
          <button class="btnGhost" id="btnSquareClear">Clear</button>
        </div>

        <div class="out" id="outSquare">—</div>

        <div class="stepsPanel" id="stepsSquare" hidden>
          <div class="stepsTitle">Steps</div>
          <pre class="stepsOut" id="outStepsSquare"></pre>
        </div>
      </div>
    </section>

    <!-- REFERENCE -->
    <section class="view" id="view-ref" aria-label="Reference">
      <div class="card">
        <div class="cardHead">
          <h2>Quick Reference</h2>
        </div>

        <div class="refGrid">
          <div class="refBox">
            <h3>Quick Conversions</h3>
            <ul>
              <li>12 in = 1 ft</li>
              <li>16" OC = 1' 4"</li>
              <li>24" OC = 2' 0"</li>
            </ul>
          </div>

          <div class="refBox">
            <h3>Common Fractions (in)</h3>
            <ul>
              <li>1/16 = 0.0625</li>
              <li>1/8 = 0.125</li>
              <li>3/16 = 0.1875</li>
              <li>1/4 = 0.25</li>
              <li>3/8 = 0.375</li>
              <li>1/2 = 0.5</li>
            </ul>
          </div>

          <div class="refBox">
            <h3>Square Layout</h3>
            <ul>
              <li>3-4-5 triangle scales to any size</li>
              <li>Check diagonal for square frames</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

  </main>

  <!-- Bottom Nav -->
  <nav class="bottomNav" aria-label="Primary">
    <button class="navBtn isActive" data-target="view-home">Home</button>
    <button class="navBtn" data-target="view-layout">Layout</button>
    <button class="navBtn" data-target="view-roof">Roofing</button>
    <button class="navBtn" data-target="view-ref">Reference</button>
  </nav>

  <script src="app.js"></script>
</body>
</html>
